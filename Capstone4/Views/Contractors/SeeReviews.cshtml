@model Capstone4.Models.Contractor

@{
    ViewBag.Title = "SeeReviews";
}

<h2>SeeReviews</h2>

<div>
    <h4>Contractor</h4>
    <hr />
    <dl class="dl-horizontal">
        @Html.HiddenFor(model => model.ID)

                <dt>
            Rating
        </dt>
        <dd>
            @{

                if (Model.ContractorReviews.Count > 0)
                {
                    double? score;
                    List<double?> ratings;
                    ratings = (from x in Model.ContractorReviews
                               where x.ContractorID == Model.ID
                               select x.Rating).ToList();
                    score = ratings.Average();
                    <input id="input-id" type="number" value="@score" class="rating" data-size="lg" name="Rating" data-readonly="true" data-show-clear="false">

                }
                else
                {
                    <input id="input-id" type="number" value="0" class="rating" data-size="lg" name="Rating" data-readonly="true" data-show-clear="false">
                }
            }

            
        </dd>
       
         <dt>
            @Html.DisplayNameFor(model => model.Username)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Username)
        </dd>


        <dt>
            Total Ratings
        </dt>

        <dd>
            @Model.ContractorReviews.Count
        </dd>


        @foreach (var item in Model.ContractorReviews)
        {
            <dt>
                Review
            </dt>

            <dd>
                @item.Review
            </dd>
            <dt>
                Rating
            </dt>

            <dd>
                <input id="input-id" type="number" value="@item.Rating" class="rating" data-size="xs" name="Rating" data-readonly="true" data-show-clear="false">
            </dd>
            <dt>
                Review Date
            </dt>

            <dd>
                @item.ReviewDate
            </dd>
        }
    </dl>
</div>
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.ID }) |
    @Html.ActionLink("Back to List", "Index")
</p>
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.css" rel="stylesheet">
<link href="~/Content/star-rating.css" media="all" rel="stylesheet" type="text/css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.js"></script>
<script src="~/Scripts/star-rating.js" type="text/javascript"></script>
<link href="~/Content/theme-krajee-svg.css" media="all" rel="stylesheet" type="text/css" />
<script src="~/Scripts/theme-krajee-svg.js"></script>


