@model Capstone4.Models.CompletedServiceRequest

@{
    ViewBag.Title = "ConfirmCompletion";
}

<h2>ConfirmCompletion</h2>
@using (Html.BeginForm("ConfirmContractor", "ContractorAcceptances", Model.ID))
{

    <div>
        @Html.AntiForgeryToken()
        <h4>CompletedServiceRequest</h4>
        <hr />
        <dl class="dl-horizontal">
            @Html.HiddenFor(model => model.ID)
            <dt>
                @Html.DisplayNameFor(model => model.ServiceRequest.Contractor.Username)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ServiceRequest.Contractor.Username)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.ServiceRequest.Contractor.ApplicationUser.Email)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ServiceRequest.Contractor.ApplicationUser.Email)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.ServiceRequest.Address.Street)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ServiceRequest.Address.Street)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.ServiceRequest.Address.City)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ServiceRequest.Address.City)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.ServiceRequest.Address.State)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ServiceRequest.Address.State)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.ServiceRequest.Address.Zip)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ServiceRequest.Address.Zip)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.ServiceRequest.Description)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ServiceRequest.Description)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.ServiceRequest.Price)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ServiceRequest.Price)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.ServiceRequest.PostedDate)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ServiceRequest.PostedDate)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.ServiceRequest.CompletionDeadline)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ServiceRequest.CompletionDeadline)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.CompletionDate)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.CompletionDate)
            </dd>
            <dt>
                @Html.DisplayNameFor(model => model.ServiceRequest.Service_Number)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ServiceRequest.Service_Number)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.AmountDue)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.AmountDue)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.ContractorPaid)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.ContractorPaid)
            </dd>

        </dl>
        <strong>Service Request Photos:</strong>
        <br> <br>

        @foreach (var item in Model.ServiceRequest.ServiceRequestFilePaths)
        {

            <div class="photocontainer">
                <img class="photo" src="~/images/@item.FileName" alt="Service Request Photo" width="200" height="133" />
            </div>

        }
        <br> <br>

        @*@foreach (var item in Model.ServiceRequest.CompletedServiceRequestFilePaths)
        {

            <div class="photocontainer">
                <img class="photo" src="~/images/@item.FileName" alt="Service Request Photo" width="200" height="133" />
            </div>

        }*@
        <br> <br/>


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Confirm Completion" class="btn btn-default" />
            </div>
        </div>
    </div>
}
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.ID }) |
    @Html.ActionLink("Back to List", "Index")
</p>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript">
        $(function () {
            var showModal = function () {
                var $input = $(this);
                var imgAlt = $input.attr("alt");
                $("#theModal h4.modal-title").html(imgAlt);
                var img = this;
                var imageHeight = $input.height();
                var imagWidth = $input.width();
                var NewimgWidth = imagWidth * 4;
                var NewImgHeight = imageHeight * 4;
                var picSrc = $input.attr("src");
                $("#theModal img").attr('src', picSrc);
                //set new image width
                $("div.modal-dialog").css("width", NewimgWidth);
                $("#theModal img").width(NewimgWidth);
                //set new image height
                $("#theModal img").height(NewImgHeight);
                $("#theModal").modal("show");
            };
            var MyHtml = '<div id="theModal" class="modal fade">' +
                    ' <div class="modal-dialog ">' +
                        '<div class="modal-content">' +
                            ' <div class="modal-header">' +
                                '<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>' +
                                '<h4 class="modal-title">Hello!</h4>' +
                             '</div>' +
                            '<div class="modal-body">' +
                               '  <img not-to-enlarge="true" class="img-responsive" + src=""alt="...">' +
                            '</div>' +
                             '<div class="modal-footer">' +
                                 '<button type="button" class="btn btn-default" data-dismiss="modal">' +
                                    'Close' +
                                 '</button>' +
                             '</div>' +
                         '</div>' +
                     '</div>' +
                 '</div>';
            $("div.body-content").append(MyHtml);
            $("img[not-to-enlarge!=true]").click(showModal);
            $("img[not-to-enlarge!=true]").css("cursor", "pointer");
        });
    </script>
}